user_input,retrieved_contexts,response,reference,context_precision,context_recall,faithfulness,answer_relevancy
本项目的前端核心框架是什么？,"['# RAG 智能知识库项目报告\n\n## 1. 技术架构 (Technical Architecture)\n\n本项目采用前后端分离架构，构建了一个基于 **混合检索 (Hybrid Search)** 和 **联网搜索增强** 的智能 RAG (Retrieval-Augmented Generation) 问答系统。\n\n### 1.1 前端技术栈 (Frontend)\n\n- **核心框架**: React 18 + Vite\n- **开发语言**: TypeScript\n- **状态管理**: Zustand\n- **UI 组件库**: Ant Design (主要组件), Lucide React (图标)\n- **样式方案**: Tailwind CSS (原子化 CSS), Framer Motion (动画交互)\n- **网络请求**: Axios\n- **Markdown 渲染**: React Markdown + Remark Gfm (支持表格、代码块等)\n- **其他特性**:\n  - **语音识别**: Web Speech API (Speech-to-Text)\n  - **流式响应**: SSE (Server-Sent Events) 实时打字机效果\n  - **引用高亮**: 自定义组件支持关键词高亮显示\n\n### 1.2 后端技术栈 (Backend)', '### 4.3 Documents (文档表)\n\n| 字段名        | 类型     | 描述                               |\n| :------------ | :------- | :--------------------------------- |\n| `id`          | Integer  | 主键                               |\n| `filename`    | String   | 文件名                             |\n| `file_size`   | Integer  | 文件大小                           |\n| `status`      | String   | `processing`, `processed`, `error` |\n| `upload_time` | DateTime | 上传时间                           |\n\n---\n\n## 5. 项目目录结构 (Project Structure)', '### 1.2 后端技术栈 (Backend)\n\n- **核心框架**: FastAPI (高性能异步 Python Web 框架)\n- **ASGI 服务器**: Uvicorn\n- **数据库**:\n  - **关系型数据库**: SQLite (存储会话历史、文档元数据)\n  - **ORM**: SQLAlchemy\n- **AI & RAG 核心**:\n  - **LangChain**: LLM 应用开发编排\n  - **向量数据库**: ChromaDB (本地持久化存储)\n  - **混合检索**: `BM25` (关键词检索, 结合 `jieba` 中文分词) + `Vector Search` (语义检索)\n  - **联网搜索**: `DuckDuckGo Search` (用于本地知识库缺失时的兜底)\n  - **LLM**: `ChatOpenAI`（OpenAI 接口规范，支持兼容 OpenAI 的第三方网关，通过 `OPENAI_API_BASE` 指定）\n- **文档处理**:\n  - **PyPDF**: PDF 解析\n  - **文本切分**: `RecursiveCharacterTextSplitter`（按字符长度切分，默认 `chunk_size=1000`，`chunk_overlap=200`）\n- **异步处理**: 全面采用 `async/await` 提升并发性能\n\n### 1.3 数据流向与检索策略', '### 4.2 Messages (消息表)\n\n| 字段名            | 类型        | 描述                                                     |\n| :---------------- | :---------- | :------------------------------------------------------- |\n| `id`              | Integer     | 主键                                                     |\n| `conversation_id` | String      | 外键，关联会话                                           |\n| `role`            | String      | `user` 或 `assistant`                                    |\n| `content`         | Text        | 消息内容                                                 |\n| `sources`         | Text (JSON) | 存储 RAG 检索到的参考源 (包含 content, source, score 等) |\n| `created_at`      | DateTime    | 发送时间                                                 |\n\n### 4.3 Documents (文档表)']",本项目的前端核心框架是 **React 18 + Vite**（基于 TypeScript 开发）。,本项目前端核心框架采用 React 18 + Vite。,0.9999999999,1.0,0.3333333333333333,
RAG 系统的数据流向是怎样的？,"['# RAG 智能知识库项目报告\n\n## 1. 技术架构 (Technical Architecture)\n\n本项目采用前后端分离架构，构建了一个基于 **混合检索 (Hybrid Search)** 和 **联网搜索增强** 的智能 RAG (Retrieval-Augmented Generation) 问答系统。\n\n### 1.1 前端技术栈 (Frontend)\n\n- **核心框架**: React 18 + Vite\n- **开发语言**: TypeScript\n- **状态管理**: Zustand\n- **UI 组件库**: Ant Design (主要组件), Lucide React (图标)\n- **样式方案**: Tailwind CSS (原子化 CSS), Framer Motion (动画交互)\n- **网络请求**: Axios\n- **Markdown 渲染**: React Markdown + Remark Gfm (支持表格、代码块等)\n- **其他特性**:\n  - **语音识别**: Web Speech API (Speech-to-Text)\n  - **流式响应**: SSE (Server-Sent Events) 实时打字机效果\n  - **引用高亮**: 自定义组件支持关键词高亮显示\n\n### 1.2 后端技术栈 (Backend)', '### 1.2 后端技术栈 (Backend)\n\n- **核心框架**: FastAPI (高性能异步 Python Web 框架)\n- **ASGI 服务器**: Uvicorn\n- **数据库**:\n  - **关系型数据库**: SQLite (存储会话历史、文档元数据)\n  - **ORM**: SQLAlchemy\n- **AI & RAG 核心**:\n  - **LangChain**: LLM 应用开发编排\n  - **向量数据库**: ChromaDB (本地持久化存储)\n  - **混合检索**: `BM25` (关键词检索, 结合 `jieba` 中文分词) + `Vector Search` (语义检索)\n  - **联网搜索**: `DuckDuckGo Search` (用于本地知识库缺失时的兜底)\n  - **LLM**: `ChatOpenAI`（OpenAI 接口规范，支持兼容 OpenAI 的第三方网关，通过 `OPENAI_API_BASE` 指定）\n- **文档处理**:\n  - **PyPDF**: PDF 解析\n  - **文本切分**: `RecursiveCharacterTextSplitter`（按字符长度切分，默认 `chunk_size=1000`，`chunk_overlap=200`）\n- **异步处理**: 全面采用 `async/await` 提升并发性能\n\n### 1.3 数据流向与检索策略', '### 4.3 Documents (文档表)\n\n| 字段名        | 类型     | 描述                               |\n| :------------ | :------- | :--------------------------------- |\n| `id`          | Integer  | 主键                               |\n| `filename`    | String   | 文件名                             |\n| `file_size`   | Integer  | 文件大小                           |\n| `status`      | String   | `processing`, `processed`, `error` |\n| `upload_time` | DateTime | 上传时间                           |\n\n---\n\n## 5. 项目目录结构 (Project Structure)', '### 4.2 Messages (消息表)\n\n| 字段名            | 类型        | 描述                                                     |\n| :---------------- | :---------- | :------------------------------------------------------- |\n| `id`              | Integer     | 主键                                                     |\n| `conversation_id` | String      | 外键，关联会话                                           |\n| `role`            | String      | `user` 或 `assistant`                                    |\n| `content`         | Text        | 消息内容                                                 |\n| `sources`         | Text (JSON) | 存储 RAG 检索到的参考源 (包含 content, source, score 等) |\n| `created_at`      | DateTime    | 发送时间                                                 |\n\n### 4.3 Documents (文档表)']","根据参考文档中的技术架构部分，RAG 系统的数据流向可以概括为以下关键步骤：

1. **前端交互层**  
   - 用户通过 React 前端发起查询（支持文本或语音输入）
   - 请求通过 Axios 发送至 FastAPI 后端，采用 SSE 协议实现流式响应

2. **混合检索阶段**  
   - **本地知识库检索**：  
     a. 文档预处理：上传的 PDF/文本通过 PyPDF 和 `RecursiveCharacterTextSplitter` 分块（默认 1000 字符/块，重叠 200 字符）  
     b. 并行执行两种检索：  
       - **关键词检索**：使用 `BM25` 算法 + `jieba` 中文分词  
       - **语义检索**：通过 ChromaDB 向量数据库进行相似度搜索  
     c. 合并检索结果并排序（参考文档未明确说明融合策略）

3. **联网搜索兜底**  
   - 当本地检索置信度不足时，自动触发 `DuckDuckGo Search` 补充外部信息

4. **生成与溯源**  
   - LangChain 编排检索结果，通过 `ChatOpenAI` 生成回答  
   - 将引用源（包含原文内容、来源文件、匹配分数等）以 JSON 格式存入消息表的 `sources` 字段

5. **数据持久化**  
   - 会话历史（Messages 表）和文档元数据（Documents 表）通过 SQLAlchemy 存入 SQLite  
   - 文档处理状态（processing/processed/error）实时更新

关键特点：  
- 采用 **异步管道**（async/await）提升并发性能  
- 检索结果与生成内容均会返回前端，支持引用高亮交互  
- 完整的数据链路可在 `Messages.sources` 和 `Documents` 表中追溯",数据流向分为文档处理流和智能问答流。文档处理流包括上传、解析、切块和双路索引生成。智能问答流包括混合检索（Hybrid Search）、联网搜索兜底（Web Search Fallback）和答案生成。,0.49999999995,1.0,,
后端使用了哪个向量数据库？,"['# RAG 智能知识库项目报告\n\n## 1. 技术架构 (Technical Architecture)\n\n本项目采用前后端分离架构，构建了一个基于 **混合检索 (Hybrid Search)** 和 **联网搜索增强** 的智能 RAG (Retrieval-Augmented Generation) 问答系统。\n\n### 1.1 前端技术栈 (Frontend)\n\n- **核心框架**: React 18 + Vite\n- **开发语言**: TypeScript\n- **状态管理**: Zustand\n- **UI 组件库**: Ant Design (主要组件), Lucide React (图标)\n- **样式方案**: Tailwind CSS (原子化 CSS), Framer Motion (动画交互)\n- **网络请求**: Axios\n- **Markdown 渲染**: React Markdown + Remark Gfm (支持表格、代码块等)\n- **其他特性**:\n  - **语音识别**: Web Speech API (Speech-to-Text)\n  - **流式响应**: SSE (Server-Sent Events) 实时打字机效果\n  - **引用高亮**: 自定义组件支持关键词高亮显示\n\n### 1.2 后端技术栈 (Backend)', '### 4.3 Documents (文档表)\n\n| 字段名        | 类型     | 描述                               |\n| :------------ | :------- | :--------------------------------- |\n| `id`          | Integer  | 主键                               |\n| `filename`    | String   | 文件名                             |\n| `file_size`   | Integer  | 文件大小                           |\n| `status`      | String   | `processing`, `processed`, `error` |\n| `upload_time` | DateTime | 上传时间                           |\n\n---\n\n## 5. 项目目录结构 (Project Structure)', '### 1.2 后端技术栈 (Backend)\n\n- **核心框架**: FastAPI (高性能异步 Python Web 框架)\n- **ASGI 服务器**: Uvicorn\n- **数据库**:\n  - **关系型数据库**: SQLite (存储会话历史、文档元数据)\n  - **ORM**: SQLAlchemy\n- **AI & RAG 核心**:\n  - **LangChain**: LLM 应用开发编排\n  - **向量数据库**: ChromaDB (本地持久化存储)\n  - **混合检索**: `BM25` (关键词检索, 结合 `jieba` 中文分词) + `Vector Search` (语义检索)\n  - **联网搜索**: `DuckDuckGo Search` (用于本地知识库缺失时的兜底)\n  - **LLM**: `ChatOpenAI`（OpenAI 接口规范，支持兼容 OpenAI 的第三方网关，通过 `OPENAI_API_BASE` 指定）\n- **文档处理**:\n  - **PyPDF**: PDF 解析\n  - **文本切分**: `RecursiveCharacterTextSplitter`（按字符长度切分，默认 `chunk_size=1000`，`chunk_overlap=200`）\n- **异步处理**: 全面采用 `async/await` 提升并发性能\n\n### 1.3 数据流向与检索策略', '### 3.2 知识库管理\n\n- **多格式支持**: 支持 PDF, TXT, MD 等格式。\n- **可视化管理**: 实时查看文档处理状态 (Processing/Processed/Error)。\n- **文档预览**: 内置文档预览器，无需下载即可查看原始内容。\n- **智能清理**: 删除文档时自动清理对应的向量数据，保持知识库纯净。\n\n### 3.3 会话历史\n\n- **持久化存储**: 所有聊天记录存入 SQLite 数据库。\n- **侧边栏导航**: 快速切换历史会话，支持新建和删除会话。\n- **上下文记忆**: 机器人能理解多轮对话中的上下文关系。\n\n---\n\n## 4. 数据库设计 (Database Design)\n\n系统使用 SQLite，核心表结构如下：\n\n### 4.1 Conversations (会话表)\n\n| 字段名       | 类型          | 描述     |\n| :----------- | :------------ | :------- |\n| `id`         | String (UUID) | 主键     |\n| `title`      | String        | 会话标题 |\n| `created_at` | DateTime      | 创建时间 |\n| `updated_at` | DateTime      | 更新时间 |\n\n### 4.2 Messages (消息表)']",根据提供的参考文档内容，后端使用的向量数据库是 **ChromaDB**（本地持久化存储）。该信息在文档的 **1.2 后端技术栈 (Backend)** 部分明确标注。,后端使用了 ChromaDB 作为本地持久化向量数据库。,0.3333333333,1.0,1.0,
如何实现流式响应？,"['# RAG 智能知识库项目报告\n\n## 1. 技术架构 (Technical Architecture)\n\n本项目采用前后端分离架构，构建了一个基于 **混合检索 (Hybrid Search)** 和 **联网搜索增强** 的智能 RAG (Retrieval-Augmented Generation) 问答系统。\n\n### 1.1 前端技术栈 (Frontend)\n\n- **核心框架**: React 18 + Vite\n- **开发语言**: TypeScript\n- **状态管理**: Zustand\n- **UI 组件库**: Ant Design (主要组件), Lucide React (图标)\n- **样式方案**: Tailwind CSS (原子化 CSS), Framer Motion (动画交互)\n- **网络请求**: Axios\n- **Markdown 渲染**: React Markdown + Remark Gfm (支持表格、代码块等)\n- **其他特性**:\n  - **语音识别**: Web Speech API (Speech-to-Text)\n  - **流式响应**: SSE (Server-Sent Events) 实时打字机效果\n  - **引用高亮**: 自定义组件支持关键词高亮显示\n\n### 1.2 后端技术栈 (Backend)', '### 4.3 Documents (文档表)\n\n| 字段名        | 类型     | 描述                               |\n| :------------ | :------- | :--------------------------------- |\n| `id`          | Integer  | 主键                               |\n| `filename`    | String   | 文件名                             |\n| `file_size`   | Integer  | 文件大小                           |\n| `status`      | String   | `processing`, `processed`, `error` |\n| `upload_time` | DateTime | 上传时间                           |\n\n---\n\n## 5. 项目目录结构 (Project Structure)', '### 4.2 Messages (消息表)\n\n| 字段名            | 类型        | 描述                                                     |\n| :---------------- | :---------- | :------------------------------------------------------- |\n| `id`              | Integer     | 主键                                                     |\n| `conversation_id` | String      | 外键，关联会话                                           |\n| `role`            | String      | `user` 或 `assistant`                                    |\n| `content`         | Text        | 消息内容                                                 |\n| `sources`         | Text (JSON) | 存储 RAG 检索到的参考源 (包含 content, source, score 等) |\n| `created_at`      | DateTime    | 发送时间                                                 |\n\n### 4.3 Documents (文档表)', '- **多模型切换**: 支持在界面上动态切换不同的 LLM 模型 (如 Claude, Gemini, Llama)。\n- **知识图谱 (Knowledge Graph)**: 引入知识图谱增强文档间的关联分析。\n- **权限管理**: 增加用户登录与多租户数据隔离。\n- **更多数据源**: 支持 Notion, URL 爬虫等数据导入。\n\n---\n\n## 8. 未来规范（Engineering Standards）\n\n本节用于指导后续迭代在“可维护性、可扩展性、可观测性、安全性”上的统一落地标准。\n\n### 8.1 API 规范（API Contract，接口契约）\n\n- **统一前缀与版本**: 所有接口保持 `/api/v1` 前缀，新增破坏性变更时升级版本。\n- **请求与响应模型**: 使用 Pydantic 明确定义入参/出参；字段命名统一采用 snake_case（与 FastAPI 默认 JSON 输出一致）。\n- **错误返回**: 统一返回 `HTTPException`，并约定 `detail` 为可读错误信息；前端对 `detail` 做兜底展示，避免白屏。\n- **流式协议**: SSE 统一使用 `data: <json>\\n\\n`；约定 chunk 结构（`answer` 分片、`sources` 最终列表、`error` 错误）。\n- **幂等与副作用**: 删除类接口必须幂等（重复删除返回 404 或 ok=false 也可接受，但需要统一约定）。\n\n### 8.2 前端规范（Frontend Standards）']","根据参考文档中的技术架构描述，流式响应的实现主要通过以下技术方案：

1. **后端技术实现**：
   - 采用 **SSE (Server-Sent Events)** 协议传输数据（文档中明确提到）
   - 数据格式遵循 `data: <json>\n\n` 的规范（见 8.1 API 规范）
   - 每个数据块（chunk）包含结构化字段：
     ```json
     {
       ""answer"": ""分片内容"",  // 流式文本片段
       ""sources"": [],       // 最终检索结果（结束时返回）
       ""error"": null        // 错误信息（如有）
     }
     ```

2. **前端技术实现**：
   - 使用浏览器原生 `EventSource` 或 Axios 处理 SSE 连接（文档提到 Axios 用于网络请求）
   - 通过 React 状态管理（Zustand）实时更新 UI
   - 实现打字机动画效果（Framer Motion 用于交互）

3. **关键设计约束**：
   - 幂等性要求：流式接口需保证中断后可恢复（见 8.1 幂等与副作用）
   - 错误处理：统一通过 `error` 字段传递异常（前端对 `detail` 做兜底展示）

示例伪代码逻辑：
```javascript
// 前端建立 SSE 连接
const eventSource = new EventSource('/api/v1/chat/stream');
eventSource.onmessage = (e) => {
  const chunk = JSON.parse(e.data);
  if (chunk.answer) appendToUI(chunk.answer); // 流式渲染
  if (chunk.sources) showReferences(chunk.sources); // 最终显示来源
};
```

该方案在文档中明确提及于 ""1.1 前端技术栈"" 的**流式响应**特性说明和 ""8.1 API 规范"" 的**流式协议**部分。",系统使用 SSE (Server-Sent Events) 实现流式响应，提供实时打字机效果。,0.7499999999625,1.0,,
混合检索的具体策略是什么？,"['# RAG 智能知识库项目报告\n\n## 1. 技术架构 (Technical Architecture)\n\n本项目采用前后端分离架构，构建了一个基于 **混合检索 (Hybrid Search)** 和 **联网搜索增强** 的智能 RAG (Retrieval-Augmented Generation) 问答系统。\n\n### 1.1 前端技术栈 (Frontend)\n\n- **核心框架**: React 18 + Vite\n- **开发语言**: TypeScript\n- **状态管理**: Zustand\n- **UI 组件库**: Ant Design (主要组件), Lucide React (图标)\n- **样式方案**: Tailwind CSS (原子化 CSS), Framer Motion (动画交互)\n- **网络请求**: Axios\n- **Markdown 渲染**: React Markdown + Remark Gfm (支持表格、代码块等)\n- **其他特性**:\n  - **语音识别**: Web Speech API (Speech-to-Text)\n  - **流式响应**: SSE (Server-Sent Events) 实时打字机效果\n  - **引用高亮**: 自定义组件支持关键词高亮显示\n\n### 1.2 后端技术栈 (Backend)', '### 1.2 后端技术栈 (Backend)\n\n- **核心框架**: FastAPI (高性能异步 Python Web 框架)\n- **ASGI 服务器**: Uvicorn\n- **数据库**:\n  - **关系型数据库**: SQLite (存储会话历史、文档元数据)\n  - **ORM**: SQLAlchemy\n- **AI & RAG 核心**:\n  - **LangChain**: LLM 应用开发编排\n  - **向量数据库**: ChromaDB (本地持久化存储)\n  - **混合检索**: `BM25` (关键词检索, 结合 `jieba` 中文分词) + `Vector Search` (语义检索)\n  - **联网搜索**: `DuckDuckGo Search` (用于本地知识库缺失时的兜底)\n  - **LLM**: `ChatOpenAI`（OpenAI 接口规范，支持兼容 OpenAI 的第三方网关，通过 `OPENAI_API_BASE` 指定）\n- **文档处理**:\n  - **PyPDF**: PDF 解析\n  - **文本切分**: `RecursiveCharacterTextSplitter`（按字符长度切分，默认 `chunk_size=1000`，`chunk_overlap=200`）\n- **异步处理**: 全面采用 `async/await` 提升并发性能\n\n### 1.3 数据流向与检索策略', '### 4.3 Documents (文档表)\n\n| 字段名        | 类型     | 描述                               |\n| :------------ | :------- | :--------------------------------- |\n| `id`          | Integer  | 主键                               |\n| `filename`    | String   | 文件名                             |\n| `file_size`   | Integer  | 文件大小                           |\n| `status`      | String   | `processing`, `processed`, `error` |\n| `upload_time` | DateTime | 上传时间                           |\n\n---\n\n## 5. 项目目录结构 (Project Structure)', '### 4.2 Messages (消息表)\n\n| 字段名            | 类型        | 描述                                                     |\n| :---------------- | :---------- | :------------------------------------------------------- |\n| `id`              | Integer     | 主键                                                     |\n| `conversation_id` | String      | 外键，关联会话                                           |\n| `role`            | String      | `user` 或 `assistant`                                    |\n| `content`         | Text        | 消息内容                                                 |\n| `sources`         | Text (JSON) | 存储 RAG 检索到的参考源 (包含 content, source, score 等) |\n| `created_at`      | DateTime    | 发送时间                                                 |\n\n### 4.3 Documents (文档表)']","根据参考文档中的技术架构部分，混合检索（Hybrid Search）的具体策略如下：

1. **技术组合**：
   - **BM25 关键词检索**：结合 `jieba` 中文分词工具对文本进行分词处理，实现基于关键词的精确匹配。
   - **向量搜索（Vector Search）**：通过语义嵌入（如 ChromaDB 的向量数据库）实现语义相似性检索。

2. **协同工作**：
   - 两种检索方式的结果会进行合并和排序，综合关键词匹配度和语义相关性得分，最终返回最优的检索结果。

3. **补充说明**：
   - 当本地知识库检索结果不足时，系统会通过 `DuckDuckGo Search` 进行联网搜索作为兜底策略（见文档 1.2 节）。

该设计旨在同时覆盖用户查询的字面匹配需求和深层语义需求，提升检索召回率与准确率。",混合检索结合了向量检索 (Vector Search) 和 BM25 关键词检索，并使用 EnsembleRetriever 对结果进行加权融合 (Reciprocal Rank Fusion) 来提取 Top-K 相关文档。,0.49999999995,0.0,1.0,
